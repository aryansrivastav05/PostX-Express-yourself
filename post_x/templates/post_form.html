{% extends "layout.html" %}

{% block title %}
    {% if form.instance.pk %}Edit Post{% else %}Create Post{% endif %} - PostX
{% endblock %}

{% block content %}
<div class="form-container" style="max-width:42rem">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem">
        <h2 class="card-title" style="font-size:1.5rem;margin:0">
            {% if form.instance.pk %}
                Edit Post
            {% else %}
                Create New Post
            {% endif %}
        </h2>
        <a href="{% url 'post_list' %}" class="btn" style="font-size:0.875rem">Back to Posts</a>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% for field in form %}
        <div class="form-group">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {% if field.name == "photo" %}
                <div class="file-upload-wrapper">
                    {{ field }}
                    <div class="file-upload-info">
                        {% if field.value %}Current: {{ field.value }}{% endif %}
                    </div>
                </div>
            {% else %}
                {{ field }}
            {% endif %}
            {% if field.help_text %}
                <div class="help-text">{{ field.help_text }}</div>
            {% endif %}
            {% if field.errors %}
                <div class="error">{{ field.errors.0 }}</div>
            {% endif %}
        </div>
        {% endfor %}
        
        <div style="margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem">
            <a href="{% url 'post_list' %}" class="btn">Cancel</a>
            <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}
                    Update Post
                {% else %}
                    Create Post
                {% endif %}
            </button>
        </div>
    </form>
</div>

<style>
    .form-container {
        animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group textarea {
        min-height: 120px;
        resize: vertical;
    }

    .file-upload-wrapper {
        position: relative;
    }

    input[type="file"] {
        padding: 0.75rem;
        background: var(--background);
        border: 2px dashed var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
    }

    input[type="file"]:hover {
        border-color: var(--primary);
    }

    .file-upload-info {
        margin-top: 0.5rem;
        font-size: 0.875rem;
        color: var(--text-light);
    }

    .help-text {
        color: var(--text-light);
        font-size: 0.75rem;
        margin-top: 0.25rem;
    }

    .error {
        color: var(--danger);
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
</style>
{% endblock %}



